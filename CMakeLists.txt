cmake_minimum_required(VERSION 2.8)

project(nsengine)

# Set the source directory
set(PROJECT_SRC_DIR ${PROJECT_SOURCE_DIR}/src)

# Set the include directory
set(PROJECT_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/include/nsengine)
set(ASSIMP_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/ext/assimp-3.1.1/include)
set(DEVIL_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/ext/devil-1.7.8/include)
set(GLEW_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/ext/glew-1.12.0/include)
set(HASHLIB_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/ext/hashlib/include)
set(SOIL_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/ext/soil-1.16.0/include)

set(CMAKE_DEBUG_POSTFIX d)

# Set the library output path
if(CMAKE_GENERATOR MATCHES "Win64")
set(POSTFIX x64)
else()
set(POSTFIX x86)
endif()

set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${PROJECT_SOURCE_DIR}/lib/${POSTFIX})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_DEBUG ${PROJECT_SOURCE_DIR}/lib/${POSTFIX})
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG ${PROJECT_SOURCE_DIR}/bin/${POSTFIX})
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${PROJECT_SOURCE_DIR}/lib/${POSTFIX})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELEASE ${PROJECT_SOURCE_DIR}/lib/${POSTFIX})
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE ${PROJECT_SOURCE_DIR}/bin/${POSTFIX})


# Set the src files for the project
file(GLOB SRC_FILES "${PROJECT_SRC_DIR}/*.c*")

# Set project includes dir
include_directories(
"${PROJECT_INCLUDE_DIR}" 
"${ASSIMP_INCLUDE_DIR}"
"${DEVIL_INCLUDE_DIR}"
"${GLEW_INCLUDE_DIR}"
"${HASHLIB_INCLUDE_DIR}"
"${SOIL_INCLUDE_DIR}"
)

# Preprocessor definitions
add_definitions(-DGLEW_MX -DGLEW_STATIC -D_CRT_SECURE_NO_WARNINGS)

# Linker flags
set(LINKER_ARGS "/WX /NODEFAULTLIB:LIBCMT")
set(CMAKE_SHARED_LINKER_FLAGS_RELEASE "${CMAKE_EXE_LINKER_FLAGS_RELEASE} ${LINKER_ARGS}" )

# Compiler flags (none right now)
#set(MY_COMPILER_FLAGS "/")
#set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${MY_COMPILER_FLAGS}" )

# Adding executable
add_library(nsengine STATIC ${SRC_FILES})
